<!DOCTYPE html><html lang="en">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>R Basics - Grouping - messyR</title>

<meta name="description" content="Data often contains information pertaining to a multitude of groups. Producing summary or aggregated statistics for these groups is a common task. Being able...">
<link rel="canonical" href="http://0.0.0.0:4000/2022/11/17/r-basics-grouping.html"><link rel="alternate" type="application/rss+xml" title="messyR" href="/feed.xml"><!-- start favicons snippet, use https://realfavicongenerator.net/ --><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#fc4d50"><link rel="shortcut icon" href="/assets/favicon.ico">

<meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/browserconfig.xml">

<meta name="theme-color" content="#ffffff">
<!-- end favicons snippet --><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.css" ><!-- start custom head snippets -->

<!-- end custom head snippets -->
<script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.isFormElement = function(node) {
    var tagName = node.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i;
      loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cbs[i]();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();
(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();
(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();
</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.6',
      sources: {
        font_awesome: 'https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.css',
        jquery: 'https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn.jsdelivr.net/npm/leancloud-storage@3.13.2/dist/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        valine: 'https://unpkg.com/valine/dist/Valine.min.js',
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h1,h2,h3'
        }
      },
      paths: {
        search_js: '/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script>
</head>
  <body>
    <div class="root" data-is-touch="false">
      <div class="layout--page js-page-root"><div class="page__main js-page-main page__viewport has-aside cell cell--auto">

      <div class="page__main-inner"><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand"><?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="310.000000pt" height="310.000000pt" viewBox="0 0 310.000000 310.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.14, written by Peter Selinger 2001-2017
</metadata>
<g transform="translate(0.000000,310.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M0 2594 c0 -334 3 -503 10 -499 6 3 10 12 10 20 0 8 8 20 19 27 11 8
23 36 31 71 7 36 16 57 25 57 18 0 35 31 35 63 0 23 58 87 80 87 21 0 43 50
37 88 -8 47 6 108 31 141 15 20 27 25 50 23 45 -5 72 13 72 46 0 32 13 51 53
76 30 18 43 14 74 -22 10 -12 15 -8 27 23 9 20 20 34 26 30 15 -9 57 24 64 51
4 13 10 24 15 24 20 0 71 53 71 72 0 12 9 30 20 42 61 65 75 76 85 72 7 -2 18
0 26 5 8 5 -163 9 -423 9 l-438 0 0 -506z"/>
<path d="M1120 3094 c0 -16 23 -44 36 -44 16 0 94 37 94 45 0 3 -29 5 -65 5
-36 0 -65 -3 -65 -6z"/>
<path d="M1360 3090 c20 -13 117 -13 125 0 4 6 -21 10 -67 10 -51 0 -68 -3
-58 -10z"/>
<path d="M1555 3075 c23 -19 42 -24 82 -25 28 0 63 4 76 9 41 16 310 -55 363
-94 17 -13 91 -42 164 -65 74 -24 147 -51 164 -61 17 -11 41 -19 54 -19 14 0
43 -20 75 -53 29 -29 79 -70 111 -92 65 -45 100 -85 73 -85 -9 0 -30 12 -47
26 -17 15 -41 27 -52 28 -12 1 -23 7 -26 15 -3 8 0 11 7 7 6 -4 11 -3 11 2 0
13 -70 75 -77 68 -7 -7 13 -48 36 -73 23 -26 52 -93 45 -104 -6 -11 32 -59
103 -130 36 -37 44 -50 38 -68 -4 -15 -1 -29 11 -42 36 -40 -16 -15 -89 43
-27 21 -53 38 -59 38 -5 0 -23 10 -40 21 l-30 22 7 -22 c5 -16 2 -21 -11 -21
-9 0 -22 -8 -29 -17 -10 -14 -16 -15 -27 -5 -17 14 -28 6 -28 -20 0 -24 -6
-23 -42 7 -39 33 -48 24 -16 -16 l24 -32 -23 -23 c-26 -26 -30 -54 -9 -54 8 0
17 -12 20 -26 6 -23 10 -25 39 -19 18 4 34 7 37 7 22 1 30 -4 30 -20 0 -10 6
-24 13 -31 10 -10 9 -14 -5 -22 -24 -14 -23 -36 3 -44 18 -6 20 -13 16 -41 -4
-25 -2 -34 8 -34 15 0 65 -88 65 -113 0 -8 9 -25 19 -38 18 -24 18 -25 0 -47
-20 -25 -17 -41 15 -87 27 -38 28 -102 2 -121 -17 -12 -18 -15 -3 -37 22 -35
46 -122 37 -137 -4 -7 -7 -62 -6 -122 2 -80 -1 -111 -11 -119 -7 -7 -13 -18
-13 -26 0 -8 -6 -27 -14 -41 -8 -15 -20 -60 -27 -99 -7 -40 -15 -73 -19 -73
-4 0 -11 -20 -14 -45 -7 -42 -9 -45 -37 -45 -30 0 -30 -1 -28 -41 3 -34 -1
-45 -23 -64 -14 -12 -28 -33 -30 -46 -2 -16 -11 -25 -25 -27 -17 -3 -23 -10
-23 -28 0 -14 -6 -24 -14 -24 -8 0 -19 -14 -25 -31 -8 -25 -15 -30 -31 -26
-13 3 -24 -1 -29 -12 -5 -9 -26 -26 -45 -36 -23 -13 -41 -32 -51 -57 -8 -21
-19 -38 -24 -38 -5 0 -13 -9 -16 -20 -6 -20 -35 -28 -35 -10 0 6 -4 10 -10 10
-5 0 -10 -8 -10 -18 0 -24 -41 -62 -47 -44 -8 21 -39 13 -51 -14 -9 -19 -17
-24 -32 -19 -12 4 -20 2 -20 -5 0 -6 -8 -14 -17 -17 -10 -4 -26 -17 -36 -30
-20 -25 -72 -32 -80 -10 -3 6 -6 2 -6 -10 -1 -16 -7 -23 -20 -23 -10 0 -37
-18 -61 -41 -39 -38 -44 -40 -83 -34 -23 4 -43 11 -45 16 -7 19 -22 8 -41 -30
-18 -34 -25 -39 -67 -45 -34 -4 -50 -2 -56 6 -6 9 -10 10 -15 2 -15 -20 -60
-25 -78 -8 -11 11 -26 15 -49 11 -19 -3 -39 0 -45 6 -8 8 -16 5 -31 -8 -18
-16 -24 -17 -41 -7 -11 7 -37 12 -57 11 -20 -2 -48 4 -62 11 -23 13 -75 21
-125 21 -11 0 -43 11 -72 24 -28 14 -61 25 -73 25 -12 0 -35 14 -51 31 -15 17
-36 30 -46 29 -43 -5 -61 1 -66 21 -3 12 -11 19 -19 16 -18 -6 -48 11 -48 28
0 8 -6 15 -13 15 -7 0 -18 5 -24 11 -7 7 -26 13 -44 14 -18 2 -36 10 -41 18
-5 9 -15 23 -23 31 -8 8 -15 17 -15 20 0 7 -89 96 -95 96 -12 0 -50 46 -47 57
2 7 -6 13 -18 13 -15 0 -20 6 -20 24 0 19 -7 26 -31 31 -17 4 -33 14 -36 23
-14 45 -34 80 -48 86 -8 3 -20 18 -26 33 -28 68 -44 93 -62 93 -14 0 -17 5
-12 18 3 9 7 19 8 22 0 3 -9 21 -21 40 l-22 35 0 -492 0 -493 1172 0 1172 0
28 32 c19 22 25 26 18 11 -17 -36 -12 -43 28 -43 32 0 47 8 92 50 34 32 61 49
72 47 26 -7 162 116 203 183 19 32 43 60 53 62 12 3 25 24 35 55 19 57 21 88
11 156 -6 44 -5 49 15 54 14 3 21 13 21 29 0 12 4 25 9 28 4 3 11 28 14 56 8
65 26 101 27 51 0 -18 -5 -51 -11 -71 -12 -40 -4 -130 11 -130 14 0 32 77 32
133 -1 26 3 58 8 70 7 18 9 14 9 -20 1 -43 14 -57 25 -27 3 9 6 38 6 65 0 28
5 82 11 121 10 67 10 72 -15 120 -14 27 -26 55 -26 62 0 7 -11 35 -25 61 -13
27 -23 51 -21 53 9 8 64 -73 75 -110 10 -31 15 -38 22 -27 6 10 9 10 9 2 0 -7
5 -13 10 -13 13 0 13 37 0 53 -44 51 -95 133 -138 220 -42 84 -52 114 -56 171
-3 38 -8 78 -12 88 -7 24 8 23 31 -2 10 -11 26 -20 35 -20 9 0 26 -11 38 -25
13 -15 28 -22 37 -19 18 7 19 -9 3 -36 -11 -17 -8 -24 22 -55 19 -19 38 -35
42 -35 4 0 8 383 8 850 l0 850 -787 0 -788 0 30 -25z m1277 -543 c17 -17 -1
-32 -37 -32 -30 0 -55 20 -55 43 0 9 82 -1 92 -11z m107 -482 c56 -98 58 -105
36 -96 -24 9 -18 -7 21 -52 20 -23 34 -48 32 -54 -5 -13 -63 60 -79 97 -4 11
-22 52 -38 92 -28 64 -38 103 -27 103 2 0 27 -40 55 -90z m-132 -432 c-3 -7
-5 -2 -5 12 0 14 2 19 5 13 2 -7 2 -19 0 -25z"/>
<path d="M2050 2545 c0 -8 5 -15 10 -15 6 0 10 7 10 15 0 8 -4 15 -10 15 -5 0
-10 -7 -10 -15z"/>
<path d="M2090 2535 c0 -11 50 -36 61 -29 8 4 4 11 -12 20 -24 13 -49 18 -49
9z"/>
<path d="M1385 2500 c-22 -5 -74 -10 -115 -11 -71 -2 -138 -17 -177 -39 -10
-5 -52 -26 -93 -45 -41 -20 -91 -51 -110 -69 -19 -19 -52 -41 -73 -51 -52 -24
-224 -208 -253 -270 -13 -27 -24 -56 -24 -64 0 -8 -14 -37 -32 -65 -41 -66
-48 -98 -58 -234 -5 -63 -11 -120 -14 -127 -2 -7 7 -55 21 -106 14 -52 36
-134 49 -183 13 -48 24 -98 24 -111 0 -12 8 -29 18 -38 10 -9 38 -49 63 -88
69 -113 127 -169 222 -219 62 -31 83 -47 80 -59 -10 -40 82 -85 212 -101 292
-38 387 -34 449 17 16 13 35 22 43 19 18 -7 89 34 139 80 21 19 43 34 49 34
23 0 143 111 160 147 9 21 23 51 31 67 17 36 17 36 1 36 -7 0 -24 -10 -37 -22
-13 -13 -36 -30 -50 -38 -90 -50 -192 -100 -235 -115 -151 -52 -478 -47 -516
8 -4 5 -21 4 -40 -3 -32 -11 -38 -9 -99 27 -70 42 -111 80 -181 169 -57 73
-68 94 -85 158 -7 28 -22 85 -33 126 -25 93 -26 118 -2 149 16 22 17 28 5 45
-18 28 -31 156 -15 156 6 0 11 7 11 15 0 8 7 15 16 15 10 0 14 6 11 14 -3 8 1
29 9 45 10 20 12 36 6 47 -7 12 0 29 24 65 18 27 35 62 39 78 3 16 15 37 26
47 10 9 19 23 19 31 0 7 7 16 15 19 8 4 15 14 15 24 0 10 10 20 21 23 15 4 20
11 17 25 -8 31 9 50 51 57 22 4 42 13 45 21 3 8 12 14 20 14 8 0 22 8 32 17
16 17 16 18 -7 23 l-24 6 25 14 c16 9 25 9 28 2 5 -15 73 -3 95 16 17 15 17
17 -5 25 l-23 9 25 10 c14 6 34 14 45 19 47 19 165 42 228 44 55 2 72 6 92 25
14 13 25 26 25 30 0 7 -140 51 -155 49 -6 -1 -28 -5 -50 -9z m-461 -252 c-11
-39 -54 -77 -54 -49 0 10 49 71 57 71 2 0 1 -10 -3 -22z m-133 -295 c-8 -15
-10 -15 -11 -2 0 17 10 32 18 25 2 -3 -1 -13 -7 -23z m-24 -55 c-3 -8 -6 -5
-6 6 -1 11 2 17 5 13 3 -3 4 -12 1 -19z m-60 -420 c-3 -8 -6 -5 -6 6 -1 11 2
17 5 13 3 -3 4 -12 1 -19z m23 -362 c-1 -20 -2 -20 -15 4 -19 33 -19 46 0 30
8 -7 15 -22 15 -34z m98 -158 c13 -16 28 -28 33 -28 18 0 84 -59 103 -91 l18
-31 -28 15 c-27 15 -147 133 -189 187 l-20 25 29 -25 c17 -14 41 -37 54 -52z
m417 -198 c8 -13 -5 -13 -25 0 -13 8 -13 10 2 10 9 0 20 -4 23 -10z m93 -20
c12 0 22 -4 22 -10 0 -16 -54 -12 -76 6 -18 15 -18 15 6 10 14 -3 35 -6 48 -6z"/>
<path d="M2240 2441 c-7 -15 -7 -21 0 -21 12 0 25 28 17 36 -3 3 -10 -4 -17
-15z"/>
<path d="M1620 2435 c0 -21 28 -31 43 -16 9 9 8 14 -3 21 -22 14 -40 12 -40
-5z"/>
<path d="M1700 2410 c0 -22 19 -27 37 -9 8 8 17 5 32 -10 21 -21 51 -28 51
-12 0 11 -80 51 -103 51 -10 0 -17 -8 -17 -20z"/>
<path d="M603 2398 c-13 -6 -23 -17 -23 -25 0 -7 -5 -13 -12 -13 -6 0 -37 -26
-67 -59 -101 -106 -159 -182 -189 -245 -29 -63 -52 -126 -52 -146 0 -8 -9 -31
-20 -50 -62 -109 -61 -107 -64 -231 -1 -77 -6 -123 -14 -131 -16 -16 -15 -28
3 -28 8 0 15 8 15 18 1 16 1 16 11 0 5 -10 19 -18 29 -18 23 0 25 -11 7 -29
-7 -7 -12 -39 -12 -82 0 -57 -4 -72 -18 -80 -24 -14 -21 -28 9 -39 18 -7 24
-15 20 -26 -3 -9 -6 -20 -6 -25 0 -5 -9 -9 -21 -9 -16 0 -19 -4 -14 -21 14
-43 62 -114 85 -126 26 -13 64 -78 55 -93 -4 -6 3 -25 14 -43 15 -25 18 -36 9
-45 -16 -16 12 -55 65 -92 23 -16 51 -37 62 -47 33 -31 51 -42 102 -62 45 -18
53 -18 72 -5 21 15 21 15 -14 47 -19 17 -35 36 -35 43 0 6 -9 14 -20 17 -13 3
-20 14 -20 29 0 14 -11 30 -30 43 -16 11 -30 27 -30 34 0 8 -21 35 -48 60 -59
57 -85 98 -77 119 4 10 -2 22 -17 33 -19 15 -20 19 -8 34 12 14 10 17 -9 22
-15 4 -20 11 -16 23 4 12 -1 22 -12 28 -14 8 -15 13 -4 25 10 13 9 17 -5 25
-15 9 -16 12 -5 26 12 14 11 20 -9 41 -20 21 -21 25 -7 31 12 4 14 11 7 23 -6
12 -5 22 2 29 8 8 8 15 1 24 -15 19 -23 72 -13 88 5 8 3 25 -6 41 -18 36 -18
39 6 39 25 0 25 11 0 43 -24 30 -26 47 -5 47 18 0 18 5 4 31 -8 15 -6 33 7 72
9 29 19 56 22 62 6 10 7 17 10 73 1 22 7 32 18 32 13 0 15 7 10 34 -7 37 11
54 34 33 9 -9 10 -4 5 26 -6 29 -4 37 8 37 8 0 18 -6 21 -12 3 -7 3 2 0 19 -5
27 -3 32 10 27 9 -3 18 0 20 7 15 50 17 53 25 40 7 -10 10 -10 16 -1 4 6 2 17
-4 23 -16 16 -14 27 4 21 9 -4 15 0 15 10 0 9 -4 16 -10 16 -5 0 -10 5 -10 10
0 6 8 10 18 8 12 -2 18 5 20 25 4 31 16 35 31 10 8 -15 10 -11 11 20 0 30 4
37 19 37 12 0 21 9 25 25 3 13 16 34 28 45 24 22 9 26 -29 8z"/>
<path d="M2230 2400 c0 -5 5 -10 11 -10 5 0 7 5 4 10 -3 6 -8 10 -11 10 -2 0
-4 -4 -4 -10z"/>
<path d="M2332 2349 c-16 -25 -11 -33 18 -24 12 4 20 13 18 23 -5 24 -22 24
-36 1z"/>
<path d="M1395 2286 c-43 -14 -254 -121 -269 -136 -18 -18 4 -23 23 -6 11 10
27 16 36 14 15 -3 14 -6 -5 -31 -18 -22 -25 -25 -36 -16 -12 10 -23 4 -59 -31
-24 -23 -47 -40 -53 -36 -28 17 -152 -188 -152 -251 0 -14 -9 -36 -20 -50 -23
-30 -26 -92 -8 -174 6 -30 11 -74 10 -98 -1 -24 5 -56 12 -70 8 -14 28 -56 45
-92 21 -45 48 -81 83 -113 29 -26 68 -61 86 -78 18 -17 35 -28 38 -25 3 3 -4
14 -15 24 -12 9 -21 22 -21 27 0 5 -10 23 -23 40 -13 17 -34 58 -46 91 -13 33
-29 74 -36 90 -8 17 -16 44 -19 60 -2 17 -10 52 -16 80 -5 27 -8 57 -4 65 3 8
8 40 10 70 3 30 13 71 23 90 9 19 23 55 31 80 8 25 24 59 35 75 11 17 28 49
39 72 12 27 29 46 47 53 16 7 29 16 29 21 0 5 11 11 24 15 14 3 27 12 30 20 3
8 15 14 26 14 11 0 20 4 20 9 0 5 20 19 45 31 25 12 47 26 51 31 3 5 16 6 30
3 13 -3 30 -2 37 3 6 6 35 9 64 8 35 -1 54 3 57 12 7 18 36 16 36 -2 0 -17 21
-20 37 -4 8 8 13 8 18 -1 5 -8 10 -8 21 1 11 9 18 8 32 -5 11 -9 36 -16 59
-16 24 0 46 -6 53 -15 7 -9 19 -14 26 -11 8 3 18 -3 23 -12 5 -10 22 -24 38
-32 15 -8 36 -25 46 -37 10 -13 29 -23 42 -23 15 0 26 -7 30 -19 3 -11 26 -35
50 -55 24 -20 47 -46 50 -59 4 -12 30 -43 58 -68 43 -38 50 -49 40 -61 -10
-12 -8 -27 8 -74 43 -122 55 -124 51 -7 -3 73 -8 95 -28 125 -13 21 -24 44
-24 52 0 9 -9 20 -21 26 -11 7 -18 18 -15 25 3 8 1 17 -4 20 -4 3 -10 0 -12
-6 -2 -6 -15 -2 -31 11 -20 16 -26 27 -21 44 4 19 -1 26 -28 40 -98 51 -111
60 -89 66 29 7 16 22 -46 55 -77 40 -68 63 12 29 52 -21 35 -2 -35 41 -67 41
-93 43 -60 5 15 -17 17 -26 9 -29 -7 -2 -17 3 -23 11 -6 8 -30 18 -53 21 -23
4 -54 12 -70 18 l-28 10 24 18 24 18 -24 6 c-13 3 -82 8 -154 11 -95 4 -141 2
-170 -8z m165 -16 c0 -5 -7 -10 -16 -10 -8 0 -12 5 -9 10 3 6 10 10 16 10 5 0
9 -4 9 -10z m63 -7 c-7 -2 -19 -2 -25 0 -7 3 -2 5 12 5 14 0 19 -2 13 -5z m57
-3 c8 -5 12 -12 9 -15 -8 -8 -39 5 -39 16 0 11 11 11 30 -1z"/>
<path d="M1384 1986 c-121 -58 -225 -177 -264 -304 -18 -56 -20 -82 -14 -162
5 -79 12 -107 40 -167 19 -39 34 -77 34 -85 1 -20 88 -110 152 -157 70 -52
143 -81 205 -81 55 0 47 11 -20 28 -26 7 -71 26 -101 42 -52 30 -136 109 -136
129 0 5 -6 14 -12 18 -25 16 -57 89 -73 168 -24 117 -14 209 31 301 19 39 43
80 52 90 9 11 29 38 45 62 15 23 31 42 36 42 5 0 16 7 24 15 19 18 127 75 144
75 6 0 15 5 18 10 4 6 -12 10 -42 10 -35 0 -69 -10 -119 -34z"/>
<path d="M1523 1921 c-31 -15 -43 -31 -25 -31 5 0 30 11 58 24 38 19 43 25 24
24 -14 0 -40 -8 -57 -17z"/>
<path d="M1420 1865 c-7 -8 -19 -15 -26 -15 -8 0 -22 -16 -31 -35 -9 -19 -20
-35 -23 -35 -4 0 -22 -33 -40 -72 -29 -62 -34 -86 -37 -162 -1 -48 2 -109 8
-135 13 -54 59 -131 93 -156 13 -10 22 -23 20 -30 -3 -6 16 -21 41 -33 48 -23
62 -13 19 14 -34 23 -97 117 -120 179 -14 37 -18 77 -18 155 0 100 2 109 36
180 20 41 53 91 72 110 19 19 36 38 36 43 0 12 -17 8 -30 -8z"/>
<path d="M1683 1822 c-67 -27 -61 -32 35 -29 62 1 95 -2 103 -10 7 -7 20 -13
28 -13 8 0 22 -7 32 -16 10 -9 23 -13 29 -9 18 11 -48 74 -90 85 -49 14 -88
12 -137 -8z"/>
<path d="M1435 1744 c-45 -48 -75 -126 -75 -196 0 -80 54 -210 109 -264 55
-55 57 -39 3 22 -53 59 -61 80 -69 183 -7 91 23 189 76 250 23 26 28 51 10 51
-7 0 -31 -21 -54 -46z"/>
<path d="M1770 1736 c0 -2 7 -7 16 -10 8 -3 12 -2 9 4 -6 10 -25 14 -25 6z"/>
<path d="M1920 1726 c0 -9 7 -16 16 -16 17 0 14 22 -4 28 -7 2 -12 -3 -12 -12z"/>
<path d="M1562 1665 c-7 -8 -9 -15 -4 -15 5 0 15 7 22 15 16 19 -1 19 -18 0z"/>
<path d="M1966 1671 c-3 -4 4 -17 16 -27 20 -18 21 -18 15 -1 -4 10 -7 23 -7
28 0 11 -17 12 -24 0z"/>
<path d="M1575 1625 c-16 -13 -26 -24 -22 -25 5 0 16 7 24 16 9 8 25 13 35 11
16 -5 17 -3 7 9 -14 17 -8 18 -44 -11z"/>
<path d="M1740 1630 c8 -5 20 -10 25 -10 6 0 3 5 -5 10 -8 5 -19 10 -25 10 -5
0 -3 -5 5 -10z"/>
<path d="M1597 1540 c-46 -62 -49 -102 -9 -149 23 -28 35 -34 71 -35 38 -1 47
4 82 41 33 36 39 49 39 87 0 63 -41 106 -102 106 -41 0 -46 -3 -81 -50z"/>
<path d="M1920 1548 c0 -7 5 -20 10 -28 8 -12 10 -9 10 13 0 15 -4 27 -10 27
-5 0 -10 -6 -10 -12z"/>
<path d="M2930 1479 c0 -8 11 -26 25 -39 32 -30 33 -10 0 27 -17 20 -24 23
-25 12z"/>
<path d="M2257 1453 c-2 -5 -1 -19 4 -33 7 -23 7 -23 8 8 1 31 -3 40 -12 25z"/>
<path d="M1781 1411 c-1 -8 -16 -27 -33 -42 -18 -16 -28 -28 -22 -29 17 0 67
57 61 72 -4 10 -6 10 -6 -1z"/>
<path d="M730 1363 c0 -15 9 -41 20 -58 l20 -30 -6 45 c-9 55 -34 87 -34 43z"/>
<path d="M3080 1366 c0 -8 5 -18 10 -21 6 -3 10 3 10 14 0 12 -4 21 -10 21 -5
0 -10 -6 -10 -14z"/>
<path d="M2192 1248 c-6 -6 -12 -16 -12 -20 0 -4 -11 -31 -24 -58 -15 -31 -20
-52 -14 -56 13 -8 23 7 48 75 22 57 23 80 2 59z"/>
<path d="M760 1228 c0 -9 7 -19 16 -22 15 -6 15 -4 3 11 -7 10 -15 20 -16 22
-2 2 -3 -3 -3 -11z"/>
<path d="M795 1168 c13 -43 40 -81 82 -115 37 -30 44 -33 49 -19 7 18 -10 38
-58 69 -16 10 -28 26 -28 37 0 20 -25 50 -41 50 -6 0 -7 -10 -4 -22z"/>
<path d="M1488 1153 c7 -3 16 -2 19 1 4 3 -2 6 -13 5 -11 0 -14 -3 -6 -6z"/>
<path d="M2070 1070 c0 -5 5 -10 10 -10 6 0 10 5 10 10 0 6 -4 10 -10 10 -5 0
-10 -4 -10 -10z"/>
<path d="M2027 1043 c-10 -20 -29 -104 -24 -109 7 -7 56 98 50 109 -2 4 -8 7
-13 7 -5 0 -11 -3 -13 -7z"/>
<path d="M1014 916 c23 -18 36 -20 36 -6 0 6 -4 10 -9 10 -5 0 -18 3 -28 6
-16 5 -16 4 1 -10z"/>
<path d="M1107 876 c-11 -8 -14 -17 -8 -20 5 -4 15 3 21 14 13 23 11 24 -13 6z"/>
<path d="M3086 755 c-5 -11 -15 -27 -21 -35 -7 -8 -15 -31 -18 -50 -6 -44 -48
-142 -69 -164 -9 -8 -19 -29 -23 -46 -4 -16 -13 -30 -20 -30 -13 0 -25 -21
-25 -46 0 -16 -22 -45 -64 -83 -15 -14 -35 -39 -43 -56 -17 -33 -52 -75 -147
-175 l-61 -65 249 -3 c137 -1 251 -1 253 1 2 2 2 177 1 388 -2 238 -6 376 -12
364z"/>
<path d="M723 575 c-8 -23 19 -48 80 -74 28 -13 65 -29 80 -37 16 -8 34 -14
40 -14 7 0 18 -9 25 -20 7 -12 28 -22 52 -26 22 -4 40 -10 40 -15 0 -14 67
-21 89 -10 25 14 28 49 5 58 -9 3 -25 1 -36 -6 -21 -13 -42 -6 -32 11 5 8 -5
9 -33 5 -36 -6 -41 -4 -46 14 -4 15 -12 20 -29 17 -17 -2 -23 2 -23 17 0 17
-8 20 -47 23 -27 2 -48 7 -48 13 0 5 -18 16 -40 25 -22 9 -40 20 -40 25 0 15
-30 10 -37 -6z"/>
<path d="M1277 399 c-10 -6 -30 -8 -44 -4 -35 8 -63 -3 -63 -26 0 -16 7 -19
41 -19 22 0 60 5 85 11 45 12 45 12 25 30 -23 22 -21 21 -44 8z"/>
</g>
</svg>
<a title="...atypical how to's
" href="/">messyR</a></div><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></div><nav class="navigation">
        <ul><li class="navigation__item"><a href="/archive.html">Archive</a></li><li class="navigation__item"><a href="/about.html">About</a></li><li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li></ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class ="main"><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"><aside class="page__aside js-page-aside"><div class="toc-aside js-toc-root"></div>
</aside></div>

              <div class="col-main cell cell--auto"><!-- start custom main top snippet -->

<!-- end custom main top snippet -->
<article itemscope itemtype="http://schema.org/Article"><div class="article__header"><header><h1>R Basics - Grouping</h1></header></div><meta itemprop="headline" content="R Basics - Grouping"><div class="article__info clearfix"><ul class="left-col menu"><li>
              <a class="button button--secondary button--pill button--sm"
                href="/archive.html?tag=R+basics">R basics</a>
            </li><li>
              <a class="button button--secondary button--pill button--sm"
                href="/archive.html?tag=Tutorial">Tutorial</a>
            </li></ul><ul class="right-col menu"><li><i class="fas fa-user"></i> <span>J Hardy</span></li><li><i class="far fa-calendar-alt"></i> <span>Nov 17, 2022</span>
            </li></ul></div><meta itemprop="author" content="J Hardy"/><meta itemprop="datePublished" content="2022-11-17T00:00:00+00:00">
    <meta itemprop="keywords" content="R basics,Tutorial"><div class="js-article-content"><div class="layout--article"><!-- start custom article top snippet -->

<!-- end custom article top snippet -->
<div class="article__content" itemprop="articleBody"><p>Data often contains information pertaining to a multitude of groups. Producing summary or aggregated statistics for these groups is a common task. Being able to efficiently perform grouping operations is a powerful tool.</p>

<p>There are many ways to produce summary statistics and aggregations using R, however, the one of most intuitive ways to achieve this is to use the <code class="language-plaintext highlighter-rouge">tidyverse</code> package <code class="language-plaintext highlighter-rouge">dplyr</code>. The <code class="language-plaintext highlighter-rouge">dplyr</code> package offers functions for aggregating and summarising data which are simple to use and that avoid some of the pitfalls found in alternative approaches.</p>

<p>We can use the built in <code class="language-plaintext highlighter-rouge">iris</code> dataset to explore grouping in R. For a quick reminder of the contents of <code class="language-plaintext highlighter-rouge">iris</code>, lets use the <code class="language-plaintext highlighter-rouge">head()</code> function.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">head</span><span class="p">(</span><span class="n">iris</span><span class="p">)</span><span class="w">
</span><span class="cd">#'   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span><span class="w">
</span><span class="cd">#' 1          5.1         3.5          1.4         0.2  setosa</span><span class="w">
</span><span class="cd">#' 2          4.9         3.0          1.4         0.2  setosa</span><span class="w">
</span><span class="cd">#' 3          4.7         3.2          1.3         0.2  setosa</span><span class="w">
</span><span class="cd">#' 4          4.6         3.1          1.5         0.2  setosa</span><span class="w">
</span><span class="cd">#' 5          5.0         3.6          1.4         0.2  setosa</span><span class="w">
</span><span class="cd">#' 6          5.4         3.9          1.7         0.4  setosa</span></code></pre></figure>

<p>We can create a copy of <code class="language-plaintext highlighter-rouge">iris</code> to work with named <code class="language-plaintext highlighter-rouge">df</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">iris</span></code></pre></figure>

<h2 id="grouping-data">Grouping data</h2>

<p>Using the <code class="language-plaintext highlighter-rouge">dplyr</code> package to generate groups to allow for the production of summary statistics and aggregations involves two functions; <code class="language-plaintext highlighter-rouge">group_by()</code> and <code class="language-plaintext highlighter-rouge">ungroup()</code>.</p>

<p><code class="language-plaintext highlighter-rouge">group_by()</code> is used to create groups, and <code class="language-plaintext highlighter-rouge">ungroup()</code> to remove them.</p>

<h3 id="group_by---single-grouping-column">group_by() - single grouping column</h3>

<p>The <code class="language-plaintext highlighter-rouge">group_by()</code> function accepts various arguments, you can check these out by running <code class="language-plaintext highlighter-rouge">?group_by</code>. In its most basic usage though, we only need to specify our data (<code class="language-plaintext highlighter-rouge">df</code>) and the column or columns that we want the data to be grouped by.</p>

<p>Let’s start by grouping <code class="language-plaintext highlighter-rouge">df</code> using the <code class="language-plaintext highlighter-rouge">Species</code> column.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">group_by</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">Species</span><span class="p">)</span><span class="w">

</span><span class="n">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span><span class="cd">#' # A tibble: 150 × 5</span><span class="w">
</span><span class="cd">#' # Groups:   Species [3]</span><span class="w">
</span><span class="cd">#'    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span><span class="w">
</span><span class="cd">#'           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span><span class="w">
</span><span class="cd">#'  1          5.1         3.5          1.4         0.2 setosa </span><span class="w">
</span><span class="cd">#'  2          4.9         3            1.4         0.2 setosa </span><span class="w">
</span><span class="cd">#'  3          4.7         3.2          1.3         0.2 setosa </span><span class="w">
</span><span class="cd">#'  4          4.6         3.1          1.5         0.2 setosa </span><span class="w">
</span><span class="cd">#'  5          5           3.6          1.4         0.2 setosa </span><span class="w">
</span><span class="cd">#'  6          5.4         3.9          1.7         0.4 setosa </span><span class="w">
</span><span class="cd">#'  7          4.6         3.4          1.4         0.3 setosa </span><span class="w">
</span><span class="cd">#'  8          5           3.4          1.5         0.2 setosa </span><span class="w">
</span><span class="cd">#'  9          4.4         2.9          1.4         0.2 setosa </span><span class="w">
</span><span class="cd">#' 10          4.9         3.1          1.5         0.1 setosa </span><span class="w">
</span><span class="cd">#' # … with 140 more rows</span><span class="w">
</span><span class="cd">#' # ℹ Use `print(n = ...)` to see more rows</span></code></pre></figure>

<p>Note that whilst using <code class="language-plaintext highlighter-rouge">group_by()</code> has converted our data into a tibble (a <code class="language-plaintext highlighter-rouge">tidyverse</code> implementation of the <code class="language-plaintext highlighter-rouge">data.frame</code>), no changes have been made to the data itself. The output of <code class="language-plaintext highlighter-rouge">print(df)</code> does show that we have 3 groups based on <code class="language-plaintext highlighter-rouge">Species</code>; <code class="language-plaintext highlighter-rouge"># Groups:   Species [3]</code>.</p>

<p>To see the effects of <code class="language-plaintext highlighter-rouge">group_by()</code> we can check the attributes of our data.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="nf">attributes</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span><span class="cd">#' $class</span><span class="w">
</span><span class="cd">#' [1] "grouped_df" "tbl_df"     "tbl"        "data.frame"</span><span class="w">
</span><span class="cd">#' </span><span class="w">
</span><span class="cd">#' $row.names</span><span class="w">
</span><span class="cd">#'   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18</span><span class="w">
</span><span class="cd">#'  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36</span><span class="w">
</span><span class="cd">#'  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54</span><span class="w">
</span><span class="cd">#'  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72</span><span class="w">
</span><span class="cd">#'  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90</span><span class="w">
</span><span class="cd">#'  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108</span><span class="w">
</span><span class="cd">#' [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126</span><span class="w">
</span><span class="cd">#' [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144</span><span class="w">
</span><span class="cd">#' [145] 145 146 147 148 149 150</span><span class="w">
</span><span class="cd">#' </span><span class="w">
</span><span class="cd">#' $names</span><span class="w">
</span><span class="cd">#' [1] "Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"     </span><span class="w">
</span><span class="cd">#' </span><span class="w">
</span><span class="cd">#' $groups</span><span class="w">
</span><span class="cd">#' # A tibble: 3 × 2</span><span class="w">
</span><span class="cd">#'   Species          .rows</span><span class="w">
</span><span class="cd">#'   &lt;fct&gt;      &lt;list&lt;int&gt;&gt;</span><span class="w">
</span><span class="cd">#' 1 setosa            [50]</span><span class="w">
</span><span class="cd">#' 2 versicolor        [50]</span><span class="w">
</span><span class="cd">#' 3 virginica         [50]</span></code></pre></figure>

<p>You can see that the <code class="language-plaintext highlighter-rouge">$groups</code> attribute has been added to record our groupings and an additional element has been added to the <code class="language-plaintext highlighter-rouge">$class</code> attribute, <code class="language-plaintext highlighter-rouge">grouped_df</code>.</p>

<p class="warning"><strong><em>CAUTION:</em></strong> Whilst our data remains grouped we need to take care when using functions that behave differently when passed a <code class="language-plaintext highlighter-rouge">grouped_df</code>. Typically this will be functions from <code class="language-plaintext highlighter-rouge">tidyverse</code> packages, though there is nothing to prevent authors of other packages utilising the <code class="language-plaintext highlighter-rouge">grouped_df</code> class. If we don’t want our output to be effected by the groupings then the grouping will need to be removed explicitly using <code class="language-plaintext highlighter-rouge">ungroup()</code>.</p>

<h2 id="summarise">summarise()</h2>

<p><code class="language-plaintext highlighter-rouge">summarise()</code>, from the <code class="language-plaintext highlighter-rouge">dplyr</code> package, creates a new data frame which will contain a row for each combination of grouping variables that exists in the data, or if there are no grouping variables, a single row summarising all of the observations in the input. The resulting data frame contains a column for each grouping variable and additional columns for each of the summary statistics that have been specified.</p>

<p>We can use <code class="language-plaintext highlighter-rouge">summarise()</code> to work out the mean petal length (<code class="language-plaintext highlighter-rouge">Petal.Length</code>) for each <code class="language-plaintext highlighter-rouge">Species</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dplyr</span><span class="o">::</span><span class="n">summarise</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">Mean.Petal.Length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">Petal.Length</span><span class="p">))</span><span class="w">
</span><span class="cd">#' # A tibble: 3 × 2</span><span class="w">
</span><span class="cd">#'   Species    Mean.Petal.Length</span><span class="w">
</span><span class="cd">#'   &lt;fct&gt;                  &lt;dbl&gt;</span><span class="w">
</span><span class="cd">#' 1 setosa                  1.46</span><span class="w">
</span><span class="cd">#' 2 versicolor              4.26</span><span class="w">
</span><span class="cd">#' 3 virginica               5.55</span></code></pre></figure>

<p>We are not limited to adding one summary statistic at a time, if we want the mean and median values for <code class="language-plaintext highlighter-rouge">Petal.Length</code>, we can add both in the same function call.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dplyr</span><span class="o">::</span><span class="n">summarise</span><span class="p">(</span><span class="w">
    </span><span class="n">df</span><span class="p">,</span><span class="w">
    </span><span class="n">Mean.Petal.Length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">Petal.Length</span><span class="p">),</span><span class="w">
    </span><span class="n">Median.Petal.Length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">median</span><span class="p">(</span><span class="n">Petal.Length</span><span class="p">)</span><span class="w">
    </span><span class="p">)</span><span class="w">
</span><span class="cd">#' # A tibble: 3 × 3</span><span class="w">
</span><span class="cd">#'   Species    Mean.Petal.Length Median.Petal.Length</span><span class="w">
</span><span class="cd">#'   &lt;fct&gt;                  &lt;dbl&gt;               &lt;dbl&gt;</span><span class="w">
</span><span class="cd">#' 1 setosa                  1.46                1.5 </span><span class="w">
</span><span class="cd">#' 2 versicolor              4.26                4.35</span><span class="w">
</span><span class="cd">#' 3 virginica               5.55                5.55</span></code></pre></figure>

<h3 id="n">n()</h3>

<p>It is often useful to have a count of the number of observations within a group. The <code class="language-plaintext highlighter-rouge">dplyr</code> function <code class="language-plaintext highlighter-rouge">n()</code> allows us to do this.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dplyr</span><span class="o">::</span><span class="n">summarise</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">observations</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">n</span><span class="p">())</span><span class="w">
</span><span class="cd">#' # A tibble: 3 × 2</span><span class="w">
</span><span class="cd">#'   Species    observations</span><span class="w">
</span><span class="cd">#'   &lt;fct&gt;             &lt;int&gt;</span><span class="w">
</span><span class="cd">#' 1 setosa               50</span><span class="w">
</span><span class="cd">#' 2 versicolor           50</span><span class="w">
</span><span class="cd">#' 3 virginica            50</span></code></pre></figure>

<h3 id="ungroup">ungroup()</h3>

<p>Once we have finished working with the groupings that we created we need to remove them. Not removing the groupings can cause issues further down the line if you forget that they are present. To remove the current groupings we need to use the <code class="language-plaintext highlighter-rouge">dplyr</code> function <code class="language-plaintext highlighter-rouge">ungroup()</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">ungroup</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></code></pre></figure>

<p>Using <code class="language-plaintext highlighter-rouge">ungroup()</code> doesn’t appear to change anything in our data, similarly to <code class="language-plaintext highlighter-rouge">group_by()</code>. However, if we review the attributes of <code class="language-plaintext highlighter-rouge">df</code> again, we see that the <code class="language-plaintext highlighter-rouge">$groups</code> attribute has now been removed and <code class="language-plaintext highlighter-rouge">grouped_df</code> is no longer an element of the <code class="language-plaintext highlighter-rouge">$class</code> attribute.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="nf">attributes</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span><span class="cd">#' $class</span><span class="w">
</span><span class="cd">#' [1] "tbl_df"     "tbl"        "data.frame"</span><span class="w">
</span><span class="cd">#' </span><span class="w">
</span><span class="cd">#' $row.names</span><span class="w">
</span><span class="cd">#'   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18</span><span class="w">
</span><span class="cd">#'  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36</span><span class="w">
</span><span class="cd">#'  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54</span><span class="w">
</span><span class="cd">#'  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72</span><span class="w">
</span><span class="cd">#'  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90</span><span class="w">
</span><span class="cd">#'  [91]  91  92  93  94  95  96  97  98  99 100 101 102 103 104 105 106 107 108</span><span class="w">
</span><span class="cd">#' [109] 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126</span><span class="w">
</span><span class="cd">#' [127] 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144</span><span class="w">
</span><span class="cd">#' [145] 145 146 147 148 149 150</span><span class="w">
</span><span class="cd">#' </span><span class="w">
</span><span class="cd">#' $names</span><span class="w">
</span><span class="cd">#' [1] "Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"</span></code></pre></figure>

<h3 id="group_by---multiple-grouping-column">group_by() - multiple grouping column</h3>

<p>Grouping can also be applied across multiple columns. Lets add a new column to <code class="language-plaintext highlighter-rouge">df</code> which we use for grouping. The new column, <code class="language-plaintext highlighter-rouge">Big.Petal</code>, will add a logical value based on whether <code class="language-plaintext highlighter-rouge">Petal.Length</code> and <code class="language-plaintext highlighter-rouge">Petal.Width</code> are above average.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">df</span><span class="o">$</span><span class="n">Big.Petal</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">Petal.Length</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">Petal.Length</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">df</span><span class="o">$</span><span class="n">Petal.Width</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">df</span><span class="o">$</span><span class="n">Petal.Width</span><span class="p">)</span><span class="w">

</span><span class="n">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span><span class="cd">#' # A tibble: 150 × 6</span><span class="w">
</span><span class="cd">#'    Sepal.Length Sepal.Width Petal.Length Petal.Width Species Big.Petal</span><span class="w">
</span><span class="cd">#'           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;lgl&gt;    </span><span class="w">
</span><span class="cd">#'  1          5.1         3.5          1.4         0.2 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  2          4.9         3            1.4         0.2 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  3          4.7         3.2          1.3         0.2 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  4          4.6         3.1          1.5         0.2 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  5          5           3.6          1.4         0.2 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  6          5.4         3.9          1.7         0.4 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  7          4.6         3.4          1.4         0.3 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  8          5           3.4          1.5         0.2 setosa  FALSE    </span><span class="w">
</span><span class="cd">#'  9          4.4         2.9          1.4         0.2 setosa  FALSE    </span><span class="w">
</span><span class="cd">#' 10          4.9         3.1          1.5         0.1 setosa  FALSE    </span><span class="w">
</span><span class="cd">#' # … with 140 more rows</span><span class="w">
</span><span class="cd">#' # ℹ Use `print(n = ...)` to see more rows</span></code></pre></figure>

<p>We can now group our data by <code class="language-plaintext highlighter-rouge">Species</code> and <code class="language-plaintext highlighter-rouge">Big.Petal</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">group_by</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">Species</span><span class="p">,</span><span class="w"> </span><span class="n">Big.Petal</span><span class="p">)</span></code></pre></figure>

<p>This grouping allows us to calculate a mean <code class="language-plaintext highlighter-rouge">Sepal.Length</code> value by both <code class="language-plaintext highlighter-rouge">Species</code> and <code class="language-plaintext highlighter-rouge">Big.Petal</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">dplyr</span><span class="o">::</span><span class="n">summarise</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">Mean.Sepal.Length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">Sepal.Length</span><span class="p">))</span><span class="w">
</span><span class="cd">#' # A tibble: 4 × 3</span><span class="w">
</span><span class="cd">#' # Groups:   Species [3]</span><span class="w">
</span><span class="cd">#'   Species    Big.Petal Mean.Sepal.Length</span><span class="w">
</span><span class="cd">#'   &lt;fct&gt;      &lt;lgl&gt;                 &lt;dbl&gt;</span><span class="w">
</span><span class="cd">#' 1 setosa     FALSE                  5.01</span><span class="w">
</span><span class="cd">#' 2 versicolor FALSE                  5.43</span><span class="w">
</span><span class="cd">#' 3 versicolor TRUE                   6.08</span><span class="w">
</span><span class="cd">#' 4 virginica  TRUE                   6.59</span></code></pre></figure>

<h3 id="group_by---keep-all-columns">group_by - keep all columns</h3>

<p><code class="language-plaintext highlighter-rouge">summarise()</code> works well, but it reduces the number of rows down to one row per distinct combination of the grouping variables, and drops columns that aren’t grouping variables. This may not always be our desired behaviour. If we want to add the mean <code class="language-plaintext highlighter-rouge">Sepal.Length</code> value by <code class="language-plaintext highlighter-rouge">Species</code> and <code class="language-plaintext highlighter-rouge">Big.Petal</code> to our data ‘as is’, we need to use another <code class="language-plaintext highlighter-rouge">dplyr</code> function; <code class="language-plaintext highlighter-rouge">mutate()</code>. <code class="language-plaintext highlighter-rouge">mutate()</code> is used to add new columns.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">mutate</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">Mean.Sepal.Length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">Sepal.Length</span><span class="p">))</span><span class="w">

</span><span class="n">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="w">
</span><span class="cd">#' # A tibble: 150 × 7</span><span class="w">
</span><span class="cd">#' # Groups:   Species, Big.Petal [4]</span><span class="w">
</span><span class="cd">#'    Sepal.Length Sepal.Width Petal.Length Petal.Width Species Big.Petal Mean.Se…¹</span><span class="w">
</span><span class="cd">#'           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;   &lt;lgl&gt;         &lt;dbl&gt;</span><span class="w">
</span><span class="cd">#'  1          5.1         3.5          1.4         0.2 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  2          4.9         3            1.4         0.2 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  3          4.7         3.2          1.3         0.2 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  4          4.6         3.1          1.5         0.2 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  5          5           3.6          1.4         0.2 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  6          5.4         3.9          1.7         0.4 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  7          4.6         3.4          1.4         0.3 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  8          5           3.4          1.5         0.2 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#'  9          4.4         2.9          1.4         0.2 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#' 10          4.9         3.1          1.5         0.1 setosa  FALSE          5.01</span><span class="w">
</span><span class="cd">#' # … with 140 more rows, and abbreviated variable name ¹​Mean.Sepal.Length</span><span class="w">
</span><span class="cd">#' # ℹ Use `print(n = ...)` to see more rows</span></code></pre></figure>

<h2 id="next-steps">Next steps</h2>

<p>Grouping is a powerful and effective way to add summary statistics to your data and the <code class="language-plaintext highlighter-rouge">dplyr</code> package offers easy to use functions to achieve this.</p>

<p>Try some of the tasks below to put the theory into practice.</p>

<p>Create a <code class="language-plaintext highlighter-rouge">data.frame</code> named <code class="language-plaintext highlighter-rouge">df</code> using the below code.</p>

<details>
  <summary>Reveal data generation code</summary>


<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">structure</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">Date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210201L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> </span><span class="m">20210202L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210203L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210204L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> </span><span class="m">20210205L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210206L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> 
</span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">,</span><span class="w"> </span><span class="m">20210207L</span><span class="p">),</span><span class="w"> </span><span class="n">Sex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Female"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Male"</span><span class="p">),</span><span class="w"> </span><span class="n">AgeGroup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> </span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> </span><span class="s2">"85plus"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 14"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0 to 59"</span><span class="p">,</span><span class="w"> </span><span class="s2">"15 to 19"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"20 to 24"</span><span class="p">,</span><span class="w"> </span><span class="s2">"25 to 44"</span><span class="p">,</span><span class="w"> </span><span class="s2">"45 to 64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"60+"</span><span class="p">,</span><span class="w"> </span><span class="s2">"65 to 74"</span><span class="p">,</span><span class="w"> </span><span class="s2">"75 to 84"</span><span class="p">,</span><span class="w"> 
</span><span class="s2">"85plus"</span><span class="p">),</span><span class="w"> </span><span class="n">FirstInfections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">45L</span><span class="p">,</span><span class="w"> </span><span class="m">454L</span><span class="p">,</span><span class="w"> </span><span class="m">28L</span><span class="p">,</span><span class="w"> </span><span class="m">44L</span><span class="p">,</span><span class="w"> </span><span class="m">203L</span><span class="p">,</span><span class="w"> </span><span class="m">176L</span><span class="p">,</span><span class="w"> 
</span><span class="m">132L</span><span class="p">,</span><span class="w"> </span><span class="m">37L</span><span class="p">,</span><span class="w"> </span><span class="m">25L</span><span class="p">,</span><span class="w"> </span><span class="m">28L</span><span class="p">,</span><span class="w"> </span><span class="m">36L</span><span class="p">,</span><span class="w"> </span><span class="m">395L</span><span class="p">,</span><span class="w"> </span><span class="m">19L</span><span class="p">,</span><span class="w"> </span><span class="m">46L</span><span class="p">,</span><span class="w"> </span><span class="m">162L</span><span class="p">,</span><span class="w"> </span><span class="m">166L</span><span class="p">,</span><span class="w"> </span><span class="m">114L</span><span class="p">,</span><span class="w"> </span><span class="m">41L</span><span class="p">,</span><span class="w"> 
</span><span class="m">22L</span><span class="p">,</span><span class="w"> </span><span class="m">17L</span><span class="p">,</span><span class="w"> </span><span class="m">41L</span><span class="p">,</span><span class="w"> </span><span class="m">449L</span><span class="p">,</span><span class="w"> </span><span class="m">26L</span><span class="p">,</span><span class="w"> </span><span class="m">50L</span><span class="p">,</span><span class="w"> </span><span class="m">192L</span><span class="p">,</span><span class="w"> </span><span class="m">162L</span><span class="p">,</span><span class="w"> </span><span class="m">121L</span><span class="p">,</span><span class="w"> </span><span class="m">45L</span><span class="p">,</span><span class="w"> </span><span class="m">34L</span><span class="p">,</span><span class="w"> </span><span class="m">20L</span><span class="p">,</span><span class="w"> 
</span><span class="m">33L</span><span class="p">,</span><span class="w"> </span><span class="m">407L</span><span class="p">,</span><span class="w"> </span><span class="m">22L</span><span class="p">,</span><span class="w"> </span><span class="m">48L</span><span class="p">,</span><span class="w"> </span><span class="m">183L</span><span class="p">,</span><span class="w"> </span><span class="m">148L</span><span class="p">,</span><span class="w"> </span><span class="m">72L</span><span class="p">,</span><span class="w"> </span><span class="m">20L</span><span class="p">,</span><span class="w"> </span><span class="m">20L</span><span class="p">,</span><span class="w"> </span><span class="m">5L</span><span class="p">,</span><span class="w"> </span><span class="m">31L</span><span class="p">,</span><span class="w"> </span><span class="m">375L</span><span class="p">,</span><span class="w"> 
</span><span class="m">28L</span><span class="p">,</span><span class="w"> </span><span class="m">45L</span><span class="p">,</span><span class="w"> </span><span class="m">153L</span><span class="p">,</span><span class="w"> </span><span class="m">150L</span><span class="p">,</span><span class="w"> </span><span class="m">91L</span><span class="p">,</span><span class="w"> </span><span class="m">28L</span><span class="p">,</span><span class="w"> </span><span class="m">18L</span><span class="p">,</span><span class="w"> </span><span class="m">13L</span><span class="p">,</span><span class="w"> </span><span class="m">29L</span><span class="p">,</span><span class="w"> </span><span class="m">369L</span><span class="p">,</span><span class="w"> </span><span class="m">27L</span><span class="p">,</span><span class="w"> </span><span class="m">39L</span><span class="p">,</span><span class="w"> 
</span><span class="m">154L</span><span class="p">,</span><span class="w"> </span><span class="m">143L</span><span class="p">,</span><span class="w"> </span><span class="m">95L</span><span class="p">,</span><span class="w"> </span><span class="m">35L</span><span class="p">,</span><span class="w"> </span><span class="m">25L</span><span class="p">,</span><span class="w"> </span><span class="m">12L</span><span class="p">,</span><span class="w"> </span><span class="m">27L</span><span class="p">,</span><span class="w"> </span><span class="m">362L</span><span class="p">,</span><span class="w"> </span><span class="m">25L</span><span class="p">,</span><span class="w"> </span><span class="m">38L</span><span class="p">,</span><span class="w"> </span><span class="m">160L</span><span class="p">,</span><span class="w"> </span><span class="m">146L</span><span class="p">,</span><span class="w"> 
</span><span class="m">93L</span><span class="p">,</span><span class="w"> </span><span class="m">22L</span><span class="p">,</span><span class="w"> </span><span class="m">20L</span><span class="p">,</span><span class="w"> </span><span class="m">17L</span><span class="p">,</span><span class="w"> </span><span class="m">37L</span><span class="p">,</span><span class="w"> </span><span class="m">356L</span><span class="p">,</span><span class="w"> </span><span class="m">18L</span><span class="p">,</span><span class="w"> </span><span class="m">30L</span><span class="p">,</span><span class="w"> </span><span class="m">150L</span><span class="p">,</span><span class="w"> </span><span class="m">149L</span><span class="p">,</span><span class="w"> </span><span class="m">87L</span><span class="p">,</span><span class="w"> </span><span class="m">30L</span><span class="p">,</span><span class="w"> 
</span><span class="m">19L</span><span class="p">,</span><span class="w"> </span><span class="m">10L</span><span class="p">,</span><span class="w"> </span><span class="m">33L</span><span class="p">,</span><span class="w"> </span><span class="m">360L</span><span class="p">,</span><span class="w"> </span><span class="m">31L</span><span class="p">,</span><span class="w"> </span><span class="m">51L</span><span class="p">,</span><span class="w"> </span><span class="m">141L</span><span class="p">,</span><span class="w"> </span><span class="m">127L</span><span class="p">,</span><span class="w"> </span><span class="m">119L</span><span class="p">,</span><span class="w"> </span><span class="m">39L</span><span class="p">,</span><span class="w"> </span><span class="m">22L</span><span class="p">,</span><span class="w"> </span><span class="m">35L</span><span class="p">,</span><span class="w"> 
</span><span class="m">34L</span><span class="p">,</span><span class="w"> </span><span class="m">349L</span><span class="p">,</span><span class="w"> </span><span class="m">21L</span><span class="p">,</span><span class="w"> </span><span class="m">32L</span><span class="p">,</span><span class="w"> </span><span class="m">160L</span><span class="p">,</span><span class="w"> </span><span class="m">132L</span><span class="p">,</span><span class="w"> </span><span class="m">107L</span><span class="p">,</span><span class="w"> </span><span class="m">33L</span><span class="p">,</span><span class="w"> </span><span class="m">35L</span><span class="p">,</span><span class="w"> </span><span class="m">9L</span><span class="p">,</span><span class="w"> </span><span class="m">27L</span><span class="p">,</span><span class="w"> </span><span class="m">323L</span><span class="p">,</span><span class="w"> 
</span><span class="m">28L</span><span class="p">,</span><span class="w"> </span><span class="m">34L</span><span class="p">,</span><span class="w"> </span><span class="m">140L</span><span class="p">,</span><span class="w"> </span><span class="m">113L</span><span class="p">,</span><span class="w"> </span><span class="m">74L</span><span class="p">,</span><span class="w"> </span><span class="m">28L</span><span class="p">,</span><span class="w"> </span><span class="m">15L</span><span class="p">,</span><span class="w"> </span><span class="m">12L</span><span class="p">,</span><span class="w"> </span><span class="m">30L</span><span class="p">,</span><span class="w"> </span><span class="m">267L</span><span class="p">,</span><span class="w"> </span><span class="m">16L</span><span class="p">,</span><span class="w"> </span><span class="m">28L</span><span class="p">,</span><span class="w"> 
</span><span class="m">104L</span><span class="p">,</span><span class="w"> </span><span class="m">105L</span><span class="p">,</span><span class="w"> </span><span class="m">42L</span><span class="p">,</span><span class="w"> </span><span class="m">15L</span><span class="p">,</span><span class="w"> </span><span class="m">7L</span><span class="p">,</span><span class="w"> </span><span class="m">4L</span><span class="p">,</span><span class="w"> </span><span class="m">23L</span><span class="p">,</span><span class="w"> </span><span class="m">280L</span><span class="p">,</span><span class="w"> </span><span class="m">18L</span><span class="p">,</span><span class="w"> </span><span class="m">29L</span><span class="p">,</span><span class="w"> </span><span class="m">127L</span><span class="p">,</span><span class="w"> </span><span class="m">112L</span><span class="p">,</span><span class="w"> 
</span><span class="m">71L</span><span class="p">,</span><span class="w"> </span><span class="m">17L</span><span class="p">,</span><span class="w"> </span><span class="m">10L</span><span class="p">,</span><span class="w"> </span><span class="m">15L</span><span class="p">,</span><span class="w"> </span><span class="m">31L</span><span class="p">,</span><span class="w"> </span><span class="m">246L</span><span class="p">,</span><span class="w"> </span><span class="m">15L</span><span class="p">,</span><span class="w"> </span><span class="m">20L</span><span class="p">,</span><span class="w"> </span><span class="m">106L</span><span class="p">,</span><span class="w"> </span><span class="m">92L</span><span class="p">,</span><span class="w"> </span><span class="m">57L</span><span class="p">,</span><span class="w"> </span><span class="m">18L</span><span class="p">,</span><span class="w"> 
</span><span class="m">19L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">),</span><span class="w"> </span><span class="n">Reinfections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">5L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">3L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> 
</span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> 
</span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> 
</span><span class="m">7L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">3L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> 
</span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> 
</span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> 
</span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> 
</span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> 
</span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> 
</span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span><span class="w"> </span><span class="m">0L</span><span class="p">)),</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"data.frame"</span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">-140L</span><span class="p">))</span></code></pre></figure>


</details>

<p>The data contains details of the daily counts of positive COVID-19 cases for the 1st 7 days of February 2021, broken down by age group and sex. The data is available from the <a href="opendata.nhs.scot">PHS Scotland open data platform</a>.</p>

<ol>
  <li>
    <p>Group the data by sex and calculate the mean and median number of first infections.</p>
  </li>
  <li>
    <p>Group the data by sex and age group and calculate the mean and median of both first infections and reinfections.</p>
  </li>
  <li>
    <p>Group the data by sex and age group and calculate the totals of both first infections and reinfections.</p>
  </li>
</ol>

<details>
  <summary>Answers</summary>

  Your outputs should resemble the examples below; <br />

  1.

  
<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="w">  </span><span class="cd">#'   # A tibble: 2 × 3</span><span class="w">
  </span><span class="cd">#'   Sex    mean_first_inf median_first_inf</span><span class="w">
  </span><span class="cd">#'   &lt;chr&gt;           &lt;dbl&gt;            &lt;dbl&gt;</span><span class="w">
  </span><span class="cd">#' 1 Female           94.4               40</span><span class="w">
  </span><span class="cd">#' 2 Male             84.7               35</span><span class="w">

  </span></code></pre></figure>


  2.

  
<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="w">  </span><span class="cd">#' # A tibble: 20 × 6</span><span class="w">
  </span><span class="cd">#' # Groups:   Sex [2]</span><span class="w">
  </span><span class="cd">#'    Sex    AgeGroup mean_first_inf median_first_inf mean_reinf median_reinf</span><span class="w">
  </span><span class="cd">#'    &lt;chr&gt;  &lt;chr&gt;             &lt;dbl&gt;            &lt;int&gt;      &lt;dbl&gt;        &lt;int&gt;</span><span class="w">
  </span><span class="cd">#'  1 Female 0 to 14           32.4                31      0.143            0</span><span class="w">
  </span><span class="cd">#'  2 Female 0 to 59          372.                362      3                2</span><span class="w">
  </span><span class="cd">#'  3 Female 15 to 19          26.3                28      0.143            0</span><span class="w">
  </span><span class="cd">#'  4 Female 20 to 24          41.6                44      0.429            0</span><span class="w">
  </span><span class="cd">#'  5 Female 25 to 44         159.                153      1.14             1</span><span class="w">
  </span><span class="cd">#'  6 Female 45 to 64         141.                146      1.14             1</span><span class="w">
  </span><span class="cd">#'  7 Female 60+              100.                 93      0.571            0</span><span class="w">
  </span><span class="cd">#'  8 Female 65 to 74          30.9                28      0.286            0</span><span class="w">
  </span><span class="cd">#'  9 Female 75 to 84          20.6                20      0                0</span><span class="w">
  </span><span class="cd">#' 10 Female 85plus            20                  17      0.286            0</span><span class="w">
  </span><span class="cd">#' 11 Male   0 to 14           32.9                33      0.286            0</span><span class="w">
  </span><span class="cd">#' 12 Male   0 to 59          341.                356      1                1</span><span class="w">
  </span><span class="cd">#' 13 Male   15 to 19          19.7                19      0                0</span><span class="w">
  </span><span class="cd">#' 14 Male   20 to 24          34.7                32      0                0</span><span class="w">
  </span><span class="cd">#' 15 Male   25 to 44         146.                154      0.429            0</span><span class="w">
  </span><span class="cd">#' 16 Male   45 to 64         134.                143      0.286            0</span><span class="w">
  </span><span class="cd">#' 17 Male   60+               82                  87      0.143            0</span><span class="w">
  </span><span class="cd">#' 18 Male   65 to 74          27.4                30      0.143            0</span><span class="w">
  </span><span class="cd">#' 19 Male   75 to 84          21                  20      0                0</span><span class="w">
  </span><span class="cd">#' 20 Male   85plus             8.43                9      0                0</span><span class="w">

  </span></code></pre></figure>


  3.

  
<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="w">  </span><span class="cd">#' # A tibble: 20 × 4</span><span class="w">
  </span><span class="cd">#' # Groups:   Sex [2]</span><span class="w">
  </span><span class="cd">#'    Sex    AgeGroup total_first_inf total_reinf</span><span class="w">
  </span><span class="cd">#'    &lt;chr&gt;  &lt;chr&gt;              &lt;int&gt;       &lt;int&gt;</span><span class="w">
  </span><span class="cd">#'  1 Female 0 to 14              227           1</span><span class="w">
  </span><span class="cd">#'  2 Female 0 to 59             2603          21</span><span class="w">
  </span><span class="cd">#'  3 Female 15 to 19             184           1</span><span class="w">
  </span><span class="cd">#'  4 Female 20 to 24             291           3</span><span class="w">
  </span><span class="cd">#'  5 Female 25 to 44            1116           8</span><span class="w">
  </span><span class="cd">#'  6 Female 45 to 64             986           8</span><span class="w">
  </span><span class="cd">#'  7 Female 60+                  701           4</span><span class="w">
  </span><span class="cd">#'  8 Female 65 to 74             216           2</span><span class="w">
  </span><span class="cd">#'  9 Female 75 to 84             144           0</span><span class="w">
  </span><span class="cd">#' 10 Female 85plus               140           2</span><span class="w">
  </span><span class="cd">#' 11 Male   0 to 14              230           2</span><span class="w">
  </span><span class="cd">#' 12 Male   0 to 59             2389           7</span><span class="w">
  </span><span class="cd">#' 13 Male   15 to 19             138           0</span><span class="w">
  </span><span class="cd">#' 14 Male   20 to 24             243           0</span><span class="w">
  </span><span class="cd">#' 15 Male   25 to 44            1019           3</span><span class="w">
  </span><span class="cd">#' 16 Male   45 to 64             935           2</span><span class="w">
  </span><span class="cd">#' 17 Male   60+                  574           1</span><span class="w">
  </span><span class="cd">#' 18 Male   65 to 74             192           1</span><span class="w">
  </span><span class="cd">#' 19 Male   75 to 84             147           0</span><span class="w">
  </span><span class="cd">#' 20 Male   85plus                59           0</span><span class="w">

  </span></code></pre></figure>


</details>
</div><section class="article__sharing d-print-none"></section><div class="d-print-none"><footer class="article__footer"><meta itemprop="dateModified" content="2022-11-17T00:00:00+00:00"><!-- start custom article footer snippet -->

<!-- end custom article footer snippet -->
<div class="article__subscribe"><div class="subscribe"><i class="fas fa-rss"></i> <a type="application/rss+xml" href="/feed.xml">Subscribe</a></div>
</div><div class="article__license"><div class="license">
    <p>This work is licensed under a <a itemprop="license" rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">Attribution-NonCommercial 4.0 International</a> license.
      <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">
        <img alt="Attribution-NonCommercial 4.0 International" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" />
      </a>
    </p>
  </div></div></footer>
<div class="article__section-navigator clearfix"><div class="previous"><span>PREVIOUS</span><a href="/2022/11/10/r-basics-data-transformation.html">R Basics - Data Transformation</a></div></div></div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();
</script>
</div><section class="page__comments d-print-none"></section></article><!-- start custom main bottom snippet -->

<!-- end custom main bottom snippet -->
</div>
            </div></div></div><div class="page__footer d-print-none">
<footer class="footer py-4 js-page-footer">
  <div class="main"><div itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="J Hardy"><meta itemprop="url" content="/"><meta itemprop="description" content="Data analyst, R developer, python enjoyer, linux user."><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><li title="Send me an Email.">
      <a class="button button--circle mail-button" itemprop="email" href="mailto:jrh-dev@protonmail.com" target="_blank">
        <i class="fas fa-envelope"></i>
      </a><li title="Follow me on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/jrh-dev" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z" />
</svg>
</div>
        </a>
      </li></ul>
</div>
</div>
    </div><div class="site-info mt-2">
      <div>© messyR 2021,
        Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> & <a
        title="TeXt is a super customizable Jekyll theme." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
      </div>
    </div>
  </div>
</footer>
</div></div>
    </div><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $body = $('body'), $window = $(window);
    var $pageRoot = $('.js-page-root'), $pageMain = $('.js-page-main');
    var activeCount = 0;
    function modal(options) {
      var $root = this, visible, onChange, hideWhenWindowScroll = false;
      var scrollTop;
      function setOptions(options) {
        var _options = options || {};
        visible = _options.initialVisible === undefined ? false : show;
        onChange = _options.onChange;
        hideWhenWindowScroll = _options.hideWhenWindowScroll;
      }
      function init() {
        setState(visible);
      }
      function setState(isShow) {
        if (isShow === visible) {
          return;
        }
        visible = isShow;
        if (visible) {
          activeCount++;
          scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
          $root.addClass('modal--show');
          $pageMain.scrollTop(scrollTop);
          activeCount === 1 && ($pageRoot.addClass('show-modal'), $body.addClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.on('scroll', hide);
          $window.on('keyup', handleKeyup);
        } else {
          activeCount > 0 && activeCount--;
          $root.removeClass('modal--show');
          $window.scrollTop(scrollTop);
          activeCount === 0 && ($pageRoot.removeClass('show-modal'), $body.removeClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.off('scroll', hide);
          $window.off('keyup', handleKeyup);
        }
        onChange && onChange(visible);
      }
      function show() {
        setState(true);
      }
      function hide() {
        setState(false);
      }
      function handleKeyup(e) {
        // Char Code: 27  ESC
        if (e.which ===  27) {
          hide();
        }
      }
      setOptions(options);
      init();
      return {
        show: show,
        hide: hide,
        $el: $root
      };
    }
    $.fn.modal = modal;
  });
})();
</script><div class="modal modal--overflow page__search-modal d-print-none js-page-search-modal"><script>
(function () {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    // search panel
    var search = (window.search || (window.search = {}));
    var useDefaultSearchBox = window.useDefaultSearchBox === undefined ?
      true : window.useDefaultSearchBox ;

    var $searchModal = $('.js-page-search-modal');
    var $searchToggle = $('.js-search-toggle');
    var searchModal = $searchModal.modal({ onChange: handleModalChange, hideWhenWindowScroll: true });
    var modalVisible = false;
    search.searchModal = searchModal;

    var $searchBox = null;
    var $searchInput = null;
    var $searchClear = null;

    function getModalVisible() {
      return modalVisible;
    }
    search.getModalVisible = getModalVisible;

    function handleModalChange(visible) {
      modalVisible = visible;
      if (visible) {
        search.onShow && search.onShow();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].focus();
      } else {
        search.onShow && search.onHide();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].blur();
        setTimeout(function() {
          useDefaultSearchBox && ($searchInput.val(''), $searchBox.removeClass('not-empty'));
          search.clear && search.clear();
          window.pageAsideAffix && window.pageAsideAffix.refresh();
        }, 400);
      }
    }

    $searchToggle.on('click', function() {
      modalVisible ? searchModal.hide() : searchModal.show();
    });
    // Char Code: 83  S, 191 /
    $(window).on('keyup', function(e) {
      if (!modalVisible && !window.isFormElement(e.target || e.srcElement) && (e.which === 83 || e.which === 191)) {
        modalVisible || searchModal.show();
      }
    });

    if (useDefaultSearchBox) {
      $searchBox = $('.js-search-box');
      $searchInput = $searchBox.children('input');
      $searchClear = $searchBox.children('.js-icon-clear');
      search.getSearchInput = function() {
        return $searchInput.get(0);
      };
      search.getVal = function() {
        return $searchInput.val();
      };
      search.setVal = function(val) {
        $searchInput.val(val);
      };

      $searchInput.on('focus', function() {
        $(this).addClass('focus');
      });
      $searchInput.on('blur', function() {
        $(this).removeClass('focus');
      });
      $searchInput.on('input', window.throttle(function() {
        var val = $(this).val();
        if (val === '' || typeof val !== 'string') {
          search.clear && search.clear();
        } else {
          $searchBox.addClass('not-empty');
          search.onInputNotEmpty && search.onInputNotEmpty(val);
        }
      }, 400));
      $searchClear.on('click', function() {
        $searchInput.val(''); $searchBox.removeClass('not-empty');
        search.clear && search.clear();
      });
    }
  });
})();
</script><div class="search search--dark">
  <div class="main">
    <div class="search__header">Search</div>
    <div class="search-bar">
      <div class="search-box js-search-box">
        <div class="search-box__icon-search"><i class="fas fa-search"></i></div>
        <input type="text" />
        <div class="search-box__icon-clear js-icon-clear">
          <a><i class="fas fa-times"></i></a>
        </div>
      </div>
      <button class="button button--theme-dark button--pill search__cancel js-search-toggle">
        Cancel</button>
    </div>
    <div class="search-result js-search-result"></div>
  </div>
</div>
<script>var SOURCES = window.TEXT_VARIABLES.sources;
var PAHTS = window.TEXT_VARIABLES.paths;
window.Lazyload.js([SOURCES.jquery, PAHTS.search_js], function() {
  var search = (window.search || (window.search = {}));
  var searchData = window.TEXT_SEARCH_DATA || {};

  function memorize(f) {
    var cache = {};
    return function () {
      var key = Array.prototype.join.call(arguments, ',');
      if (key in cache) return cache[key];
      else return cache[key] = f.apply(this, arguments);
    };
  }

  /// search
  function searchByQuery(query) {
    var i, j, key, keys, cur, _title, result = {};
    keys = Object.keys(searchData);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      for (j = 0; j < searchData[key].length; j++) {
        cur = searchData[key][j], _title = cur.title;
        if ((result[key] === undefined || result[key] && result[key].length < 4 )
          && _title.toLowerCase().indexOf(query.toLowerCase()) >= 0) {
          if (result[key] === undefined) {
            result[key] = [];
          }
          result[key].push(cur);
        }
      }
    }
    return result;
  }

  var renderHeader = memorize(function(header) {
    return $('<p class="search-result__header">' + header + '</p>');
  });

  var renderItem = function(index, title, url) {
    return $('<li class="search-result__item" data-index="' + index + '"><a class="button" href="' + url + '">' + title + '</a></li>');
  };

  function render(data) {
    if (!data) { return null; }
    var $root = $('<ul></ul>'), i, j, key, keys, cur, itemIndex = 0;
    keys = Object.keys(data);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      $root.append(renderHeader(key));
      for (j = 0; j < data[key].length; j++) {
        cur = data[key][j];
        $root.append(renderItem(itemIndex++, cur.title, cur.url));
      }
    }
    return $root;
  }

  // search box
  var $result = $('.js-search-result'), $resultItems;
  var lastActiveIndex, activeIndex;

  function clear() {
    $result.html(null);
    $resultItems = $('.search-result__item'); activeIndex = 0;
  }
  function onInputNotEmpty(val) {
    $result.html(render(searchByQuery(val)));
    $resultItems = $('.search-result__item'); activeIndex = 0;
    $resultItems.eq(0).addClass('active');
  }

  search.clear = clear;
  search.onInputNotEmpty = onInputNotEmpty;

  function updateResultItems() {
    lastActiveIndex >= 0 && $resultItems.eq(lastActiveIndex).removeClass('active');
    activeIndex >= 0 && $resultItems.eq(activeIndex).addClass('active');
  }

  function moveActiveIndex(direction) {
    var itemsCount = $resultItems ? $resultItems.length : 0;
    if (itemsCount > 1) {
      lastActiveIndex = activeIndex;
      if (direction === 'up') {
        activeIndex = (activeIndex - 1 + itemsCount) % itemsCount;
      } else if (direction === 'down') {
        activeIndex = (activeIndex + 1 + itemsCount) % itemsCount;
      }
      updateResultItems();
    }
  }

  // Char Code: 13  Enter, 37  ⬅, 38  ⬆, 39  ➡, 40  ⬇
  $(window).on('keyup', function(e) {
    var modalVisible = search.getModalVisible && search.getModalVisible();
    if (modalVisible) {
      if (e.which === 38) {
        modalVisible && moveActiveIndex('up');
      } else if (e.which === 40) {
        modalVisible && moveActiveIndex('down');
      } else if (e.which === 13) {
        modalVisible && $resultItems && activeIndex >= 0 && $resultItems.eq(activeIndex).children('a')[0].click();
      }
    }
  });

  $result.on('mouseover', '.search-result__item > a', function() {
    var itemIndex = $(this).parent().data('index');
    itemIndex >= 0 && (lastActiveIndex = activeIndex, activeIndex = itemIndex, updateResultItems());
  });
});
</script>
</div></div>


<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function scrollToAnchor(anchor, duration, callback) {
      var $root = this;
      $root.animate({ scrollTop: $(anchor).position().top }, duration, function() {
        window.history.replaceState(null, '', window.location.href.split('#')[0] + anchor);
        callback && callback();
      });
    }
    $.fn.scrollToAnchor = scrollToAnchor;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function affix(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroll,
        offsetBottom = 0, scrollTarget = window, scroll = window.document, disabled = false, isOverallScroller = true,
        rootTop, rootLeft, rootHeight, scrollBottom, rootBottomTop,
        hasInit = false, curState;

      function setOptions(options) {
        var _options = options || {};
        _options.offsetBottom && (offsetBottom = _options.offsetBottom);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroll && (scroll = _options.scroll);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $scrollTarget = $(scrollTarget);
        isOverallScroller = window.isOverallScroller($scrollTarget[0]);
        $scroll = $(scroll);
      }
      function preCalc() {
        top();
        rootHeight = $root.outerHeight();
        rootTop = $root.offset().top + (isOverallScroller ? 0 :  $scrollTarget.scrollTop());
        rootLeft = $root.offset().left;
      }
      function calc(needPreCalc) {
        needPreCalc && preCalc();
        scrollBottom = $scroll.outerHeight() - offsetBottom - rootHeight;
        rootBottomTop = scrollBottom - rootTop;
      }
      function top() {
        if (curState !== 'top') {
          $root.removeClass('fixed').css({
            left: 0,
            top: 0
          });
          curState = 'top';
        }
      }
      function fixed() {
        if (curState !== 'fixed') {
          $root.addClass('fixed').css({
            left: rootLeft + 'px',
            top: 0
          });
          curState = 'fixed';
        }
      }
      function bottom() {
        if (curState !== 'bottom') {
          $root.removeClass('fixed').css({
            left: 0,
            top: rootBottomTop + 'px'
          });
          curState = 'bottom';
        }
      }
      function setState() {
        var scrollTop = $scrollTarget.scrollTop();
        if (scrollTop >= rootTop && scrollTop <= scrollBottom) {
          fixed();
        } else if (scrollTop < rootTop) {
          top();
        } else {
          bottom();
        }
      }
      function init() {
        if(!hasInit) {
          var interval, timeout;
          calc(true); setState();
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState();
          });
          $window.on('resize', function() {
            disabled || (calc(true), setState());
          });
          hasInit = true;
        }
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions,
        refresh: function() {
          calc(true, { animation: false }); setState();
        }
      };
    }
    $.fn.affix = affix;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function toc(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroller, $tocUl = $('<ul class="toc toc--ellipsis"></ul>'), $tocLi, $headings, $activeLast, $activeCur,
        selectors = 'h1,h2,h3', container = 'body', scrollTarget = window, scroller = 'html, body', disabled = false,
        headingsPos, scrolling = false, hasRendered = false, hasInit = false;

      function setOptions(options) {
        var _options = options || {};
        _options.selectors && (selectors = _options.selectors);
        _options.container && (container = _options.container);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroller && (scroller = _options.scroller);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $headings = $(container).find(selectors).filter('[id]');
        $scrollTarget = $(scrollTarget);
        $scroller = $(scroller);
      }
      function calc() {
        headingsPos = [];
        $headings.each(function() {
          headingsPos.push(Math.floor($(this).position().top));
        });
      }
      function setState(element, disabled) {
        var scrollTop = $scrollTarget.scrollTop(), i;
        if (disabled || !headingsPos || headingsPos.length < 1) { return; }
        if (element) {
          $activeCur = element;
        } else {
          for (i = 0; i < headingsPos.length; i++) {
            if (scrollTop >= headingsPos[i]) {
              $activeCur = $tocLi.eq(i);
            } else {
              $activeCur || ($activeCur = $tocLi.eq(i));
              break;
            }
          }
        }
        $activeLast && $activeLast.removeClass('active');
        ($activeLast = $activeCur).addClass('active');
      }
      function render() {
        if(!hasRendered) {
          $root.append($tocUl);
          $headings.each(function() {
            var $this = $(this);
            $tocUl.append($('<li></li>').addClass('toc-' + $this.prop('tagName').toLowerCase())
              .append($('<a></a>').text($this.text()).attr('href', '#' + $this.prop('id'))));
          });
          $tocLi = $tocUl.children('li');
          $tocUl.on('click', 'a', function(e) {
            e.preventDefault();
            var $this = $(this);
            scrolling = true;
            setState($this.parent());
            $scroller.scrollToAnchor($this.attr('href'), 400, function() {
              scrolling = false;
            });
          });
        }
        hasRendered = true;
      }
      function init() {
        var interval, timeout;
        if(!hasInit) {
          render(); calc(); setState(null, scrolling);
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState(null, scrolling);
          });
          $window.on('resize', window.throttle(function() {
            if (!disabled) {
              render(); calc(); setState(null, scrolling);
            }
          }, 100));
        }
        hasInit = true;
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions
      };
    }
    $.fn.toc = toc;
  });
})();
/*(function () {

})();*/
</script><script>
  /* toc must before affix, since affix need to konw toc' height. */(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  var TOC_SELECTOR = window.TEXT_VARIABLES.site.toc.selectors;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window);
    var $articleContent = $('.js-article-content');
    var $tocRoot = $('.js-toc-root'), $col2 = $('.js-col-aside');
    var toc;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
    var hasToc = $articleContent.find(TOC_SELECTOR).length > 0;

    function disabled() {
      return $col2.css('display') === 'none' || !hasToc;
    }

    tocDisabled = disabled();

    toc = $tocRoot.toc({
      selectors: TOC_SELECTOR,
      container: $articleContent,
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      tocDisabled = disabled();
      toc && toc.setOptions({
        disabled: tocDisabled
      });
    }, 100));

  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window), $pageFooter = $('.js-page-footer');
    var $pageAside = $('.js-page-aside');
    var affix;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');

    affix = $pageAside.affix({
      offsetBottom: $pageFooter.outerHeight(),
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      scroll: hasSidebar ? $('.js-page-main').children() : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      affix && affix.setOptions({
        disabled: tocDisabled
      });
    }, 100));

    window.pageAsideAffix = affix;
  });
})();
</script>
    </div>
    <script>(function () {
  var $root = document.getElementsByClassName('root')[0];
  if (window.hasEvent('touchstart')) {
    $root.dataset.isTouch = true;
    document.addEventListener('touchstart', function(){}, false);
  }
})();
</script>
  </body>
</html>

